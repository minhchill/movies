import{g as x,n as M,r as b,f as N,h as L,i as k,j as v,k as y,m as O,l as h,a as l,o as I,p as P,w as S,P as F,q as C,t as H,d as j,L as D,E as R,F as W,v as _,x as q}from"./index-b3280b4d.js";function z({swiper:a,extendParams:d,on:s,emit:t}){let e;a.autoplay={running:!1,paused:!1},d({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function n(){if(!a.size){a.autoplay.running=!1,a.autoplay.paused=!1;return}const o=a.slides.eq(a.activeIndex);let c=a.params.autoplay.delay;o.attr("data-swiper-autoplay")&&(c=o.attr("data-swiper-autoplay")||a.params.autoplay.delay),clearTimeout(e),e=M(()=>{let i;a.params.autoplay.reverseDirection?a.params.loop?(a.loopFix(),i=a.slidePrev(a.params.speed,!0,!0),t("autoplay")):a.isBeginning?a.params.autoplay.stopOnLastSlide?r():(i=a.slideTo(a.slides.length-1,a.params.speed,!0,!0),t("autoplay")):(i=a.slidePrev(a.params.speed,!0,!0),t("autoplay")):a.params.loop?(a.loopFix(),i=a.slideNext(a.params.speed,!0,!0),t("autoplay")):a.isEnd?a.params.autoplay.stopOnLastSlide?r():(i=a.slideTo(0,a.params.speed,!0,!0),t("autoplay")):(i=a.slideNext(a.params.speed,!0,!0),t("autoplay")),(a.params.cssMode&&a.autoplay.running||i===!1)&&n()},c)}function u(){return typeof e<"u"||a.autoplay.running?!1:(a.autoplay.running=!0,t("autoplayStart"),n(),!0)}function r(){return!a.autoplay.running||typeof e>"u"?!1:(e&&(clearTimeout(e),e=void 0),a.autoplay.running=!1,t("autoplayStop"),!0)}function f(o){a.autoplay.running&&(a.autoplay.paused||(e&&clearTimeout(e),a.autoplay.paused=!0,o===0||!a.params.autoplay.waitForTransition?(a.autoplay.paused=!1,n()):["transitionend","webkitTransitionEnd"].forEach(c=>{a.$wrapperEl[0].addEventListener(c,m)})))}function p(){const o=x();o.visibilityState==="hidden"&&a.autoplay.running&&f(),o.visibilityState==="visible"&&a.autoplay.paused&&(n(),a.autoplay.paused=!1)}function m(o){!a||a.destroyed||!a.$wrapperEl||o.target===a.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(c=>{a.$wrapperEl[0].removeEventListener(c,m)}),a.autoplay.paused=!1,a.autoplay.running?n():r())}function g(){a.params.autoplay.disableOnInteraction?r():(t("autoplayPause"),f()),["transitionend","webkitTransitionEnd"].forEach(o=>{a.$wrapperEl[0].removeEventListener(o,m)})}function E(){a.params.autoplay.disableOnInteraction||(a.autoplay.paused=!1,t("autoplayResume"),n())}function T(){a.params.autoplay.pauseOnMouseEnter&&(a.$el.on("mouseenter",g),a.$el.on("mouseleave",E))}function $(){a.$el.off("mouseenter",g),a.$el.off("mouseleave",E)}s("init",()=>{a.params.autoplay.enabled&&(u(),x().addEventListener("visibilitychange",p),T())}),s("beforeTransitionStart",(o,c,i)=>{a.autoplay.running&&(i||!a.params.autoplay.disableOnInteraction?a.autoplay.pause(c):r())}),s("sliderFirstMove",()=>{a.autoplay.running&&(a.params.autoplay.disableOnInteraction?r():f())}),s("touchEnd",()=>{a.params.cssMode&&a.autoplay.paused&&!a.params.autoplay.disableOnInteraction&&n()}),s("destroy",()=>{$(),a.autoplay.running&&r(),x().removeEventListener("visibilitychange",p)}),Object.assign(a.autoplay,{pause:f,run:n,start:u,stop:r})}const B=({movie:a})=>{const{getTrailerId:d,setIsModalOpen:s}=N(),t=L(),{fadeDown:e,staggerContainer:n}=k(),{overview:u,original_title:r,poster_path:f,id:p}=a,m=()=>{d(p),s(!0)},g=()=>{t(`/movie/${p}`)};return v("div",{className:y(O," mx-auto flex items-center h-full  flex-row lg:gap-32 sm:gap-20"),children:[v(h.div,{variants:n(.2,.3),initial:"hidden",animate:"show",className:"text-gray-300 sm:max-w-[80vw] max-w-[90vw]  md:max-w-[420px] font-nunito flex flex-col sm:gap-5 xs:gap-3 gap-[10px] sm:mb-8",children:[l(h.h2,{variants:e,className:y(I),children:r}),l(h.p,{variants:e,className:P,children:u.length>180?`${u.substring(0,180)}...`:u}),v(h.div,{variants:e,className:"flex flex-row items-center  gap-4 sm:mt-6 xs:mt-5 mt-[18px] ",children:[l("button",{type:"button",name:"watch-trailer",className:y(S,"text-shadow watch-trailer"),onClick:m,children:"Watch trailer"}),l("button",{type:"button",name:"watch-now",className:y(S,` bg-[#ff0000] shadow-glow
             text-shadow text-secColor `),onClick:g,children:"Watch now"})]})]}),l(F,{title:r,posterPath:f,className:"mr-auto"})]})},G=b.memo(B),V=({movies:a})=>{const{isModalOpen:d}=N(),s=b.useRef(null);return b.useEffect(()=>{var e,n,u;const t=(e=s.current)==null?void 0:e.swiper;t&&(d?(n=t.autoplay)==null||n.stop():(u=t.autoplay)==null||u.start())},[d]),l(C,{ref:s,className:"mySwiper lg:h-screen sm:h-[640px] xs:h-[520px] h-[460px] w-full",loop:!0,slidesPerView:1,autoplay:{delay:1e4,disableOnInteraction:!1},modules:[z],children:a.map(t=>l(H,{style:{backgroundImage:`
              linear-gradient(to top, rgba(0,0,0,0.6), rgba(0,0,0,0.5)),url('https://image.tmdb.org/t/p/original/${t.backdrop_path}'`,backgroundPosition:"center",backgroundSize:"cover"},className:" h-full w-full will-change-transform motion-reduce:transform-none",children:({isActive:e})=>e?l(G,{movie:t}):null},t.id))})},Q=()=>{const{data:a,isLoading:d,isError:s}=j({category:"movie",type:"popular",page:1});if(d)return l(D,{});if(s)return l(R,{error:"Unable to fetch the movies! "});const t=a==null?void 0:a.results.slice(0,5);return v(W,{children:[l(V,{movies:t}),l("div",{className:y(O,"lg:mt-12 md:mt-8 sm:mt-6 xs:mt-4 mt-2"),children:_.map(({title:e,category:n,type:u})=>l(q,{title:e,category:n,type:u},e))})]})};export{Q as default};
