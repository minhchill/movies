import{r as p,y as P,i as C,j as a,F as N,a as e,l,I as D,k as v,m as S,u as E,z as W,A as z,B as A,L as G,E as L,P as O,p as _,W as Q,C as V,D as B,x as H,o as T}from"./index-a3fd20a2.js";import{I as q,R as J}from"./ImageGallery-0cc75e01.js";const K=({casts:r})=>{const n=P("(min-width: 768px"),{fadeDown:i,staggerContainer:o}=C(),x=r.slice(0,4);return x.length===0?null:a(N,{children:[e(l.h3,{variants:i,className:"text-secColor font-bold md:text-[18px] sm:text-[16.75px] xs:text-[15.75px] text-[14.75px]",children:"Top Casts"}),e(l.div,{variants:o(.2,1),initial:"hidden",animate:"show",className:"flex flex-wrap md:gap-4 sm:gap-[14px] gap-2  sm:-mt-2 xs:-mt-[6px] -mt-1",children:x.map(g=>{const{id:m,profile_path:w,name:t}=g;return a(l.figure,{variants:i,className:"flex flex-col justify-start gap-2",children:[e("div",{className:"md:h-[96px] md:w-[64px] h-[54px] w-[40px]",children:e(D,{width:n?64:40,height:n?96:54,src:`https://image.tmdb.org/t/p/original/${w}`,alt:t,className:" object-cover rounded-md shadow-md"})}),e("h4",{className:"text-gray-300 md:text-[12px] sm:text-[10.75px] text-[10px] md:max-w-[64px] text-center font-semibold sm:-mt-0 leading-snug max-w-[40px]",children:t})]},m)})})]})},U=p.memo(K,(r,n)=>{var i,o;return((i=r.casts[0])==null?void 0:i.id)===((o=n.casts[0])==null?void 0:o.id)}),X=({name:r})=>e("span",{className:`genre\r
       md:text-[12.75px] sm:text-[12px] xs:text-[11.75px] text-[10.75px]  sm:py-1 py-[2.75px] sm:px-3 px-[10px] rounded-full dark:text-gray-300`,children:r}),Y=p.memo(X),Z=({videos:r})=>{const n=r.slice(0,2);return e("section",{className:v(S," flex flex-col lg:gap-16 md:gap-14 sm:gap-12 xs:gap-10 gap-8 lg:py-24 md:py-16 sm:py-12 xs:py-10 py-8"),children:n.map(i=>a("div",{className:"sm:w-[80%] w-[90%] mx-auto flex flex-col md:gap-2 sm:gap-[6px] xs:gap-1 gap-[2px]",children:[e("h2",{className:"dark:text-secColor text-gray-800 font-nunito font-semibold lg:text-[24px] md:text-[22.75px] sm:text-[18.75px] xs:text-[18px] text-[16.75px] mb-1",children:i.name}),e("div",{className:"w-[100%] lg:h-[480px] md:h-[420px] sm:h-[320px] h-[210px] rounded-md mx-auto shadow-lg",children:e("iframe",{src:`https://www.youtube.com/embed/${i.key}?enablejsapi=1&origin=http://127.0.0.1:5173/`,title:"trailer",width:"100%",height:"100%",className:"rounded-md",allowFullScreen:!0})})]},i.id))})},ae=()=>{const{category:r,id:n}=E(),[i,o]=p.useState(!1),[x,g]=p.useState(!1),{fadeDown:m,staggerContainer:w}=C(),t=W(z(Number(n),r)),{data:s,isLoading:f,isFetching:$,isError:R}=A({category:String(r),id:Number(n)});p.useEffect(()=>(document.title=(s!=null&&s.title||s!=null&&s.name)&&!f?s.title||s.name:"tMovies",()=>{document.title="tMovies"}),[s==null?void 0:s.title,f,s==null?void 0:s.name]);const j=()=>o(d=>!d);if(f||$)return e(G,{});if(R)return e(L,{error:"Something went wrong!"});const{title:h,poster_path:u,overview:c,name:b,genres:F,videos:I,credits:y}=s,M={backgroundImage:`linear-gradient(to top, rgba(0,0,0), rgba(0,0,0,0.98),rgba(0,0,0,0.8) ,rgba(0,0,0,0.4)),url('https://image.tmdb.org/t/p/original/${u}'`,backgroundPosition:"top",backgroundSize:"cover"};return a(N,{children:[e("section",{className:"w-full",style:M,children:a("div",{className:`${S} lg:py-36 sm:py-[136px] sm:pb-28 xs:py-28 xs:pb-12 pt-24 pb-8 flex flex-row lg:gap-12 md:gap-10 gap-8 justify-center`,children:[e(O,{title:h,posterPath:u}),a(l.div,{variants:w(.2,.4),initial:"hidden",animate:"show",className:"text-gray-300 sm:max-w-[80vw] max-w-[90vw]  md:max-w-[520px] font-nunito flex flex-col lg:gap-5 sm:gap-4 xs:gap-[14px] gap-3 mb-8 flex-1 will-change-transform motion-reduce:transform-none",children:[e(l.h2,{variants:m,className:v(T," md:max-w-[420px] will-change-transform motion-reduce:transform-none"),children:h||b}),e(l.ul,{variants:m,className:"flex flex-row items-center  sm:gap-[14px] xs:gap-3 gap-[6px] flex-wrap will-change-transform motion-reduce:transform-none",children:F.map(d=>e(Y,{name:d.name},d.id))}),a(l.p,{variants:m,className:`${_} will-change-transform motion-reduce:transform-none`,children:[e("span",{children:c.length>280?`${i?c:`${c.slice(0,280)}...`}`:c}),e("button",{type:"button",className:v("font-bold ml-1 hover:underline transition-all duration-300",c.length>280?"inline-block":"hidden"),onClick:j,children:i?"show less":"show more"})]}),e(U,{casts:(y==null?void 0:y.cast)||[]}),a(l.div,{variants:m,className:"space-y-4 will-change-transform motion-reduce:transform-none",children:[a("div",{className:"flex items-center gap-4",children:[e(Q,{id:Number(n),type:r,title:h||b||"",posterPath:u,size:"lg"}),e("div",{className:"flex items-center gap-3",children:t?a(N,{children:[a("span",{className:"text-blue-400 font-medium text-sm",children:["Watched ",new Date(t.dateWatched).toLocaleDateString()]}),a("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-1",children:[e(V,{size:16}),t.review?"Edit Review":"Add Review"]})]}):e("span",{className:"text-gray-400 text-sm",children:"Click the eye icon to mark as watched"})})]}),t&&a("div",{className:"bg-black/30 backdrop-blur-sm rounded-lg p-4 border border-gray-700",children:[e("h3",{className:"text-white font-semibold mb-3",children:"My Review"}),t.rating&&a("div",{className:"flex items-center gap-2 mb-3",children:[e("span",{className:"text-gray-300 text-sm",children:"My Rating:"}),a("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((d,k)=>e(B,{className:`w-4 h-4 ${k<t.rating?"text-yellow-400":"text-gray-600"}`},k)),a("span",{className:"text-gray-300 text-sm ml-1",children:["(",t.rating,"/5)"]})]})]}),t.review?a("p",{className:"text-gray-300 leading-relaxed",children:['"',t.review,'"']}):e("p",{className:"text-gray-400 italic text-sm",children:'No review written yet. Click "Add Review" to share your thoughts!'}),t.images&&t.images.length>0&&e("div",{className:"mt-4",children:e(q,{images:t.images,maxPreviewImages:4})})]})]})]})]})}),e(Z,{videos:I.results}),e(H,{title:`Similar ${r==="movie"?"movies":"series"}`,category:String(r),className:`${S}`,id:Number(n),showSimilarShows:!0}),e(J,{id:Number(n),type:r,title:h||b||"",posterPath:u,currentReview:t==null?void 0:t.review,currentRating:t==null?void 0:t.rating,isOpen:x,onClose:()=>g(!1)})]})};export{ae as default};
